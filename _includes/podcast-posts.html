
{% comment %} Display the first post {% endcomment %}
{%- assign podcastPosts = site.posts 
  | where_exp: 'podcastPost', 'podcastPost.date <= site.time' 
  | where_exp: 'podcastPost', 'podcastPost.guest-details != nil' 
-%}
{%- if podcastPosts.size > 0 -%}
  <ul class="post-list">
    {%- for podcastPost in podcastPosts limit: podcastLimit offset: podcastOffset -%}
      {%- assign date_format = site.minima.date_format | default: "%b %-d, %Y" -%}
      {%- assign cardLink = podcastPost.url | relative_url -%}
      {%- assign podcastTitle = podcastPost.title | escape -%}
      {%- assign guestDetails = podcastPost.guest-details -%}
      {%- comment -%}
        The following code will remove the extension of the post, like .md or .markdown
        and rename the file with a .png extesion. To rename, you need to get the
        size of the filename and the size of the extension, then you
        remove the original extension and replace with a new one.
      {%- endcomment -%}
      {%- assign cardFileName = podcastPost.path 
        | split: '/' 
        | last 
        | prepend: '/uploads/wf-featured-images/' 
        | relative_url
      -%}
      {%- assign cardExtension = cardFileName.size | split: '.' | last | size -%}
      {%- assign cardFileSize = cardFileName.size -%}
      {%- assign cardFileExtensionSize = cardFileName | split: '.' | last | size -%}
      {%- assign cardFileSizeNoExtension = cardFileSize | minus: cardFileExtensionSize -%}
      {%- assign cardFileName = cardFileName | slice: 0,cardFileSizeNoExtension | append: "png" -%}
      <li>
        <a href="{{- cardLink -}}"><img src="{{- cardFileName -}}" alt="{{- podcastTitle -}}"></a>
        <h3>
          <a class="post-link" href="{{cardLink}}">
                {{ podcastTitle }}
          </a>
        </h3>
        {%- if guestDetails.size > 0 -%}
          {%- for guestDetail in guestDetails -%}                
            with <span class="guest-name" itemprop="name">{{guestDetail.guest-name}}</span><br>
          {%- endfor -%}
        {%- endif -%}
      </li>
    {%- endfor -%}
  </ul>
{%- endif -%}
